$schema: "https://json-schema.org/draft/2020-12/schema"
$defs:
  Filter:
    type: "object"
    properties:
      useClonesWithCountGreaterThen:
        type: "integer"
type: "object"
properties:
  filterForDataWithUmi:
    $ref: "#/$defs/Filter"
  filterForDataWithoutUmi:
    $ref: "#/$defs/Filter"
  productiveOnly:
    type: "boolean"
  searchAlleleParameter:
    type: "object"
    properties:
      diversityRatioToSearchCommonMutationsInAnAllele:
        type: "number"
      diversityThresholds:
        type: "object"
        properties:
          diversityForSkipTestForRatioForZeroAllele:
            type: "number"
          minDiversityForAllele:
            type: "number"
          minDiversityForMutation:
            type: "number"
      minCountOfNaiveClonesToAddAllele:
        type: "integer"
      minRelativePenaltyBetweenAllelesForCloneAlign:
        type: "number"
      regressionFilter:
        anyOf:
        - allOf:
          - type: "object"
            properties:
              allowedSkippedPointsInRegression:
                type: "integer"
              maxSlopeForHomozygous:
                type: "number"
              minPValue:
                type: "number"
              minYInterceptForHeterozygous:
                type: "number"
              minYInterceptForHomozygous:
                type: "number"
              windowSizeForRegression:
                type: "integer"
          - type: "object"
            properties:
              type:
                const: "byCount"
            required:
            - "type"
        - allOf:
          - type: "object"
            properties:
              allowedSkippedPointsInRegression:
                type: "integer"
              maxSlopeForHomozygous:
                type: "number"
              minPValue:
                type: "number"
              minYInterceptForHeterozygous:
                type: "number"
              minYInterceptForHomozygous:
                type: "number"
              windowSizeForRegression:
                type: "integer"
          - type: "object"
            properties:
              type:
                const: "byDiversity"
            required:
            - "type"
        - type: "object"
          properties:
            type:
              const: "noop"
          required:
          - "type"
      topByDiversity:
        type: "number"
  searchMutationsInCDR3:
    type: "object"
    properties:
      minClonesCount:
        type: "integer"
      minDiversity:
        type: "number"
      minPartOfTheSameLetter:
        type: "number"
