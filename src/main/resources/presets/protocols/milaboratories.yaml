milab-human-ig-rna-multiplex:
  inheritFrom: generic-amplicon-with-umi
  pipeline:
    - align
    - refineTagsAndSort
    - assemble
    - exportClones
  mixins:
    - type: SetSpecies
      species: hsa
    - type: MaterialTypeRNA
    - type: SetTagPattern
      tagPattern: ^N{0:2}tggtatcaacgcagagt(UMI:N{14})N{20}(R1:*) \ ^N{22}(R2:*)
    - type: LeftAlignmentBoundaryNoPoint
      floating: false
    - type: RightAlignmentBoundaryNoPoint
      floating: false
      geneType: C
    - type: SetSplitClonesBy
      geneType: V
      value: true
    - type: SetSplitClonesBy
      geneType: J
      value: true
    - type: SetSplitClonesBy
      geneType: C
      value: true
    - type: SetClonotypeAssemblingFeatures
      features: [ "{CDR1Begin:FR4End}" ]
    - type: AddQcChecks
      args:
        - type: OverlappedReadsMoreBetter
          middle: 0.8
          upper: 0.9


milab-human-tcr-rna-race:
  inheritFrom: generic-amplicon-with-umi
  mixins:
    - type: SetSpecies
      species: hsa
    - type: MaterialTypeRNA
    - type: SetTagPattern
      tagPattern: ^(R1:*) \ ^tggtatcaacgcagagt(UMI:N{14})N{10}(R2:*)
    - type: LeftAlignmentBoundaryNoPoint
      floating: false
    - type: RightAlignmentBoundaryNoPoint
      floating: true
      geneType: C
    - type: SetSplitClonesBy
      geneType: V
      value: true
    - type: SetSplitClonesBy
      geneType: J
      value: true
    - type: SetClonotypeAssemblingFeatures
      features: [ "VDJRegion" ]
    - type: AddQcChecks
      args:
        - type: OverlappedReadsMoreBetter
          middle: 0.8
          upper: 0.9


milab-human-tcr-rna-multiplex:
  inheritFrom: generic-amplicon-with-umi
  mixins:
    - type: SetSpecies
      species: hsa
    - type: MaterialTypeRNA
    - type: SetTagPattern
      tagPattern: ^N{0:2}tggtatcaacgcagagt(UMI:N{14})N{21}(R1:*) \ ^N{20}(R2:*)
    - type: LeftAlignmentBoundaryNoPoint
      floating: false
    - type: RightAlignmentBoundaryNoPoint
      floating: false
      geneType: C
    - type: SetSplitClonesBy
      geneType: V
      value: true
    - type: SetSplitClonesBy
      geneType: J
      value: true
    - type: AddQcChecks
      args:
        - type: OverlappedReadsMoreBetter
          middle: 0.8
          upper: 0.9


milab-human-tcr-dna-multiplex:
  inheritFrom: generic-amplicon
  mixins:
    - type: SetSpecies
      species: hsa
    - type: MaterialTypeDNA
    - type: LeftAlignmentBoundaryNoPoint
      floating: true
    - type: RightAlignmentBoundaryNoPoint
      floating: true
      geneType: J
    - type: AddQcChecks
      args:
        - type: OverlappedReadsMoreBetter
          middle: 0.8
          upper: 0.9


milab-mouse-tcr-rna-race:
  inheritFrom: milab-human-tcr-rna-race
  mixins:
    - type: SetSpecies
      species: mmu